<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="author" content="Tencent.AlloyTeam.Jetyu" />
	<meta name="copyright" content="Tencent.AlloyTeam" />
	<meta name="keywords" content="腾讯 Alloy 团队" />
	<meta name="description" content="Tencent.AlloyTeam" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

	<title>Tencent AlloyTeam 标准文档</title>
	<style type="text/css">
	/*body{
		-webkit-tap-highlight-color: rgba(0,0,0,0);
	}*/
	#div1{
		width: :200px;
		height: 100px;
		border:1px solid #999;
	}
	/*input,
	input[disabled]{
		border:1px solid #888;
		color:#000;
		background: none;
		box-shadow: none;
		border-radius: 0;
	}*/
	</style>
	<!-- <link href="./style/main.css" rel="stylesheet" type="text/css" /> -->
</head>
<body>
	<!-- 注释 -->
	<textarea></textarea>
	<p>
		<input type="text" id="input1" placeholder="default" />
	</p>
	<p>
		<input type="text" id="input2" placeholder="tap" />
	</p>
	<p>
		<input type="text" id="input3" placeholder="touchstart" />
	</p>

	<a id="anchor1" href="http://www.qq.com">超链接</a>

	<div id="div1">
		
	</div>
	<script type="text/javascript" src="http://pub.idqqimg.com/qqun/xiaoqu/mobile/js/zepto.min.09a12ba1.js"></script>

	<script type="text/javascript">
	var myTap = function($el, callback){
		var point = {};
		$el.on('touchstart', function(e){
			var touch = e.touches[0];
			point.x1 = touch.pageX;
			point.y1 = touch.pageY;
		}).on('touchend', function(e){
			if ((point.x2 && Math.abs(point.x1 - point.x2) > 30) ||
				(point.y2 && Math.abs(point.y1 - point.y2) > 30)){
				// swipe
			} else {
				// 防止转了一圈回到起点
				if ((point.deltaX && point.deltaX > 30) ||
					(point.deltaY && point.deltaY > 30)) {

				} else {
					callback();
				}
			}
			point = {};
		});
		$(document.body).on('touchmove', function(e){
			var touch = e.touches[0];
			point.x2 = touch.pageX;
			point.y2 = touch.pageY;
			var deltaX = Math.abs(point.x2 - point.x1);
			var deltaY = Math.abs(point.y2 - point.y1);
			point.deltaX = point.deltaX && point.deltaX > deltaX? point.deltaX: deltaX;
			point.deltaY = point.deltaY && point.deltaY > deltaY? point.deltaY: deltaY;
		});
	};

		// 在Android下能阻止聚焦
		// input1.onmousedown = function(e){
		// 	e.preventDefault();
		// };

		// $('#input2').on('tap', function(e){
		// 	input2.focus();
		// 	// $('#input2').focus();
		// 	// e.preventDefault();
		// 	// alert(1);
		// }).on('click', function(e){
		// 	e.preventDefault();
		// });
		myTap($('#input2'), function(){
			input2.disabled = false;
			input2.focus();
		});
		input2.onmousedown = function(e){
			e.preventDefault();
		};

		input3.ontouchstart = function(){
			input3.focus();
		};
		input3.onmousedown = function(e){
			e.stopPropagation();
			e.preventDefault();
		};

		$(document.body).on('click', function(e){
			if(e.target.tagName === 'A') {
				e.preventDefault();
			}
		});

		$(document.body).on('tap', function(e){
			if(e.target.tagName === 'A') {
				location.href = e.target.href;
			}
		});

		// 在Android下，不能用touchstart，不然手指起来的时候会触发click导致失焦
		// 当然可以绑定mousedown并阻止默认（绑定click阻止默认没用）
		$(document.body).on('tap', '#div1', function(e){
			input3.focus();

		}).on('mousedown', function(e){
			e.preventDefault();
		});
		// myTap($('#div1'), function(){
		// 	input3.focus();
		// });
		// $(document.body).on('click', function(e){
		// 	if(e.target.id === 'div1') {
		// 		input3.focus();
		// 	}
		// });
	</script>
<!--Web-->
</body>
</html>